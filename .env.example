# =============================================================================
# Notification Hub - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values.
# Never commit .env to version control.

# =============================================================================
# Database (Required)
# =============================================================================
# Local development (Docker):
#   DATABASE_URL="postgresql://postgres:postgres@localhost:5437/notification_hub"
#
# Production (Vercel Postgres):
#   Get this from your Vercel dashboard after provisioning the database
DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require"

# =============================================================================
# ntfy.sh Push Notifications (Required for push delivery)
# =============================================================================
# Default topic for notifications when channel doesn't specify one
# Use a random string to prevent unauthorized access (e.g., notification-hub-abc123)
NTFY_DEFAULT_TOPIC="notification-hub-xxx-default"

# ntfy.sh base URL (default is the public server)
NTFY_BASE_URL="https://ntfy.sh"

# Timeout for ntfy.sh API calls in milliseconds (default: 2000)
# Prevents slow/down ntfy.sh from blocking your API
NTFY_TIMEOUT_MS="2000"

# =============================================================================
# Dashboard Authentication (Required for web dashboard)
# =============================================================================
# bcrypt hash of the admin password
# Generate with: npx bcrypt-cli hash 'your-password'
# Or use Node.js: require('bcrypt').hashSync('password', 10)
ADMIN_PASSWORD_HASH=""

# Session cookie secret (use a long random string)
# Generate with: openssl rand -base64 32
SESSION_SECRET=""

# Session TTL in hours (default: 24)
SESSION_TTL_HOURS="24"

# =============================================================================
# Optional Configuration
# =============================================================================
# Idempotency record TTL in hours (default: 24)
IDEMPOTENCY_TTL_HOURS="24"

# Notification retention in days (default: 30)
# Notifications older than this are auto-deleted by the cleanup cron
RETENTION_DAYS="30"

# Maximum retry attempts for failed push notifications (default: 5)
RETRY_MAX_ATTEMPTS="5"

# =============================================================================
# Vercel Cron (Production only)
# =============================================================================
# Secret token to authorize cron job requests
# Vercel automatically sets this when you configure crons in vercel.json
# Generate with: openssl rand -base64 32
# CRON_SECRET="your-cron-secret"
